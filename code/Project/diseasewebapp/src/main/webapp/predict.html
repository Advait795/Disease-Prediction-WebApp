<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/prediction_style.css">
    <title>Prediction</title>
</head>
<body>
   
    <div class="container">
        <div class="title">Patient Details</div>
        <form id="patient-details" action="./api"  method="POST">
            <div class="user-details">
                <div class="input-box">
                    <span class="details"> 
                        <label for="age">Age in years</label>
                        <input type="number" id="age"  name="age" placeholder="ex.20">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="sex">Sex</label>
                        <input type="number" name="sex" placeholder="ex. 1 for male">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="age">CP</label>
                        <input type="number" name="cp" placeholder="CP">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="age">Trest BPS</label>
                        <input type="number" name="trestbps" placeholder="trestbps">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="cholesterol">Cholesterol</label>
                        <input type="number" name="cholesterol" placeholder="Chol">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="age">FBS</label>
                        <input type="number" name="fbs" placeholder="fbs">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="restecg">Rest ECG</label>
                        <input type="number" name="restecg" placeholder="restecg">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="thalach">thalach</label>
                        <input type="number" name="thalach" placeholder="thalach">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="age">exang</label>
                        <input type="number" name="exang" placeholder="exang">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="age">oldpeak</label>
                        <input type="double" name="oldpeak" placeholder="oldpeak">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="slope">slope</label>
                        <input type="number" name="slope" placeholder="slope">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="ca">ca</label>
                        <input type="number" name="ca" placeholder="ca">
                    </span>
                </div>
                <div class="input-box">
                    <span class="details"> 
                        <label for="thal">thal</label>
                        <input type="number" name="thal" placeholder="thal">
                    </span>
                </div>   
            </div>
            <div class="button">
                <input type="submit">
            </div>
           
        </form>
    </div>
    
</body>

<script>

        document.getElementById("patient-details").addEventListener("submit", function (event) {
            event.preventDefault();

            validate();

            if(validate()){
                this.submit();
            }
        })

        function validate() {

            const allElements = document.getElementById("patient-details").elements;

            let count = 0;

            for (let x of allElements) {

                if (x.tagName === "INPUT" && x.type === 'number') {

                    if (!notEmpty(x.value)) {
                        count++;
                    }
                }
            }
            if ( count > 8) {
                    alert("please provide atleast 5 details.." + count);
                    window.location.reload();

                    return false;
                }
             
            return true;
            
        }

        function notEmpty(value) {
            return value.trim() !== "";
        }
</script>
</html>